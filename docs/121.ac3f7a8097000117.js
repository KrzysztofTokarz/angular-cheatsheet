"use strict";(self.webpackChunkangular_cheatsheet=self.webpackChunkangular_cheatsheet||[]).push([[121],{5121:(F,c,r)=>{r.r(c),r.d(c,{default:()=>v});var p=r(6814),u=r(6742),d=r(5303),a=r(1687),e=r(5879);let h=(()=>{class t{constructor(){(0,a.F)(1e3).subscribe(()=>console.log("Interval from first component"))}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-destroy-ref-first"]],standalone:!0,features:[e.jDz],decls:2,vars:0,template:function(s,n){1&s&&(e.TgZ(0,"p"),e._uU(1,"destroy-ref-first works!"),e.qZA())},dependencies:[p.ez],styles:["[_nghost-%COMP%]{display:block}"]}),t})();var y=r(1993);let m=(()=>{class t{constructor(){(0,a.F)(1e3).pipe((0,y.sL)()).subscribe(()=>console.log("Interval from fourth component"))}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-destroy-ref-fourth"]],standalone:!0,features:[e.jDz],decls:2,vars:0,template:function(s,n){1&s&&(e.TgZ(0,"p"),e._uU(1,"destroy-ref-fourth works!"),e.qZA())},dependencies:[p.ez],styles:["[_nghost-%COMP%]{display:block}"]}),t})();var _=r(8645);class l extends _.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(o){const{hasError:s,_hasValue:n,_value:i,thrownError:b,isStopped:R,_isComplete:U}=this;s?o.error(b):(R||U)&&(n&&o.next(i),o.complete())}next(o){this.isStopped||(this._value=o,this._hasValue=!0)}complete(){const{_hasValue:o,_value:s,_isComplete:n}=this;n||(this._isComplete=!0,o&&super.next(s),super.complete())}}var f=r(9773);let g=(()=>{class t{constructor(){this.onDestroy$=new l,(0,a.F)(1e3).pipe((0,f.R)(this.onDestroy$)).subscribe(()=>console.log("Interval from second component"))}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-destroy-ref-second"]],standalone:!0,features:[e.jDz],decls:2,vars:0,template:function(s,n){1&s&&(e.TgZ(0,"p"),e._uU(1,"destroy-ref-second works!"),e.qZA())},dependencies:[p.ez],styles:["[_nghost-%COMP%]{display:block}"]}),t})(),D=(()=>{class t{constructor(){this.onDestroy$=new l,(0,a.F)(1e3).pipe((0,f.R)(this.onDestroy$)).subscribe(()=>console.log("Interval from third component")),(0,e.f3M)(e.ktI).onDestroy(()=>{this.onDestroy$.next(),this.onDestroy$.complete()})}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-destroy-ref-third"]],standalone:!0,features:[e.jDz],decls:2,vars:0,template:function(s,n){1&s&&(e.TgZ(0,"p"),e._uU(1,"destroy-ref-third works!"),e.qZA())},dependencies:[p.ez],styles:["[_nghost-%COMP%]{display:block}"]}),t})();function C(t,o){1&t&&e._UZ(0,"app-destroy-ref-first",6)}function w(t,o){1&t&&e._UZ(0,"app-destroy-ref-second",6)}function Z(t,o){1&t&&e._UZ(0,"app-destroy-ref-third",6)}function T(t,o){1&t&&e._UZ(0,"app-destroy-ref-fourth",6)}const v=(()=>{class t{constructor(){this.showFirst=!1,this.showSecond=!1,this.showThird=!1,this.showFourth=!1}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-destroy-ref"]],standalone:!0,features:[e.jDz],decls:43,vars:5,consts:[[3,"openConsole"],[1,"d-flex","justify-content-around","mt-4"],[1,"example-wrapper"],[3,"click"],["class","mt-2",4,"ngIf"],[1,"mt-1"],[1,"mt-2"]],template:function(s,n){1&s&&(e.TgZ(0,"p"),e._uU(1," Angular v16 has introduced a new provider called "),e.TgZ(2,"strong"),e._uU(3,"DestroyRef"),e.qZA(),e._uU(4,", which allows for registering destroy callbacks for a specific lifecycle scope. This feature is applicable to "),e.TgZ(5,"strong"),e._uU(6,"components, directives, pipes, embedded views, and instances of EnvironmentInjector"),e.qZA(),e._uU(7,".\n"),e.qZA(),e.TgZ(8,"p"),e._uU(9," It works the same way as ngOnDestroy lifecycle hook, but gives us more flexibility and allows to create reusable logic\n"),e.qZA(),e.TgZ(10,"p"),e._uU(11,' One of usage examples is new rxjs operator provided by angular called "'),e.TgZ(12,"strong"),e._uU(13,"takeUntilDestroyed()"),e.qZA(),e._uU(14,'", which significantly improves a way of unsubscribe from observables.\n'),e.qZA(),e.TgZ(15,"app-live-example",0)(16,"p"),e._uU(17,"Click buttons below to toggle components visibility"),e.qZA(),e.TgZ(18,"div",1)(19,"div",2)(20,"app-button",3),e.NdJ("click",function(){return n.showFirst=!n.showFirst}),e._uU(21,"Show/hide"),e.qZA(),e.YNc(22,C,1,0,"app-destroy-ref-first",4),e.TgZ(23,"p",5),e._uU(24,"In this case we don`t unsubsribe from observable, so our counter multiplies"),e.qZA()(),e.TgZ(25,"div",2)(26,"app-button",3),e.NdJ("click",function(){return n.showSecond=!n.showSecond}),e._uU(27,"Show/hide"),e.qZA(),e.YNc(28,w,1,0,"app-destroy-ref-second",4),e.TgZ(29,"p",5),e._uU(30,"In this case we unsubscribe in traditional way (using ngOnDestroy)"),e.qZA()(),e.TgZ(31,"div",2)(32,"app-button",3),e.NdJ("click",function(){return n.showThird=!n.showThird}),e._uU(33,"Show/hide"),e.qZA(),e.YNc(34,Z,1,0,"app-destroy-ref-third",4),e.TgZ(35,"p",5),e._uU(36,"In this case we unsubscribe by injecting DestroyRef"),e.qZA()(),e.TgZ(37,"div",2)(38,"app-button",3),e.NdJ("click",function(){return n.showFourth=!n.showFourth}),e._uU(39,"Show/hide"),e.qZA(),e.YNc(40,T,1,0,"app-destroy-ref-fourth",4),e.TgZ(41,"p",5),e._uU(42,"In this case we unsubscribe by using takeUntilDestroyed() rxjs operator"),e.qZA()()()()),2&s&&(e.xp6(15),e.Q6J("openConsole",!0),e.xp6(7),e.Q6J("ngIf",n.showFirst),e.xp6(6),e.Q6J("ngIf",n.showSecond),e.xp6(6),e.Q6J("ngIf",n.showThird),e.xp6(6),e.Q6J("ngIf",n.showFourth))},dependencies:[p.ez,p.O5,u.r,h,g,D,m,d.s],styles:["[_nghost-%COMP%]{display:block}.example-wrapper[_ngcontent-%COMP%]{text-align:center;flex:1}"]}),t})()}}]);